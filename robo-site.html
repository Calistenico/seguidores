from selenium import webdriver
from selenium.webdriver.common.by import By
import time
import telepot

# Crie as opÃ§Ãµes do driver
options = webdriver.ChromeOptions()
options.add_argument('--no-sandbox')  # NecessÃ¡rio se vocÃª estiver usando o Chrome em um ambiente restrito

# Inicialize o driver do Chrome com as opÃ§Ãµes
driver = webdriver.Chrome(options=options)

# URL da pÃ¡gina da web que vocÃª deseja raspar
driver.get('https://casino.betfair.com/pt-br/')

# Token do seu bot do Telegram e ID do grupo
bot_token = '6640349473:AAGAwbWw5MKZeHpoKcm2BUS9rM5wl1wNnpo'  # Substitua pelo token real do seu bot
group_chat_id = -1001942114963  # Substitua pelo ID do seu grupo Telegram

# Inicialize o bot do Telegram
bot = telepot.Bot(bot_token)

while True:
    try:
        # Espera atÃ© que haja pelo menos 3 nÃºmeros gerados
        while True:
            elems = driver.find_elements(By.CLASS_NAME, 'number')
            if len(elems) >= 3:
                break
            time.sleep(1)  # Espere por um segundo antes de verificar novamente

        # Pegue o primeiro, segundo e terceiro nÃºmeros da lista de elementos
        primeiro_numero = elems[0].text
        segundo_numero = elems[1].text
        terceiro_numero = elems[2].text

        # Verifica a coluna dos nÃºmeros
        coluna_primeiro = None
        coluna_segundo = None
        coluna_terceiro = None
        
        colunas = {
            '1': 'COLUNA1', '2': 'COLUNA2', '3': 'COLUNA3',
            '4': 'COLUNA1', '5': 'COLUNA2', '6': 'COLUNA3',
            '7': 'COLUNA1', '8': 'COLUNA2', '9': 'COLUNA3',
            '10': 'COLUNA1', '11': 'COLUNA2', '12': 'COLUNA3',
            '13': 'COLUNA1', '14': 'COLUNA2', '15': 'COLUNA3',
            '16': 'COLUNA1', '17': 'COLUNA2', '18': 'COLUNA3',
            '19': 'COLUNA1', '20': 'COLUNA2', '21': 'COLUNA3',
            '22': 'COLUNA1', '23': 'COLUNA2', '24': 'COLUNA3',
            '25': 'COLUNA1', '26': 'COLUNA2', '27': 'COLUNA3',
            '28': 'COLUNA1', '29': 'COLUNA2', '30': 'COLUNA3',
            '31': 'COLUNA1', '32': 'COLUNA2', '33': 'COLUNA3',
            '34': 'COLUNA1', '35': 'COLUNA2', '36': 'COLUNA3',
            '0': '0',
        }
        
        coluna_primeiro = colunas.get(primeiro_numero)
        coluna_segundo = colunas.get(segundo_numero)
        coluna_terceiro = colunas.get(terceiro_numero)

        # Imprima os nÃºmeros raspados com suas colunas
        print(f"Terceiro nÃºmero raspado: {terceiro_numero} - Coluna: {coluna_terceiro}")
        print(f"Segundo nÃºmero raspado: {segundo_numero} - Coluna: {coluna_segundo}")
        print(f"Primeiro nÃºmero raspado: {primeiro_numero} - Coluna: {coluna_primeiro}")
  

        # Verifica se os trÃªs nÃºmeros sÃ£o da mesma coluna
        if coluna_primeiro == coluna_segundo == coluna_terceiro:
            # Envie um sinal para apostar nas colunas opostas
            colunas_opostas = list(set(['COLUNA1', 'COLUNA2', 'COLUNA3']) - set([coluna_primeiro]))
            roleta = "ROULETTE BR ğŸ”´âš«ï¸"
            mensagem_sinal = f'ğŸ¯ Sinal de Aposta ğŸ¯\n\nğŸ’¸ https://abrir.link/QeWtt ğŸ’¸\n       â˜ğŸ¾ SITE DO CASINOğŸ‘†ğŸ¾\n\nğŸ–¥ Roleta: {roleta}\nğŸ”¥ Entrada: {", ".join(colunas_opostas)}\nğŸ›Ÿ AtÃ© duas proteÃ§Ãµes - Cobrir o zero !\nğŸ§¨ Ãšltimos nÃºmeros: {primeiro_numero, segundo_numero, terceiro_numero}'
            bot.sendMessage(group_chat_id, mensagem_sinal)

        # Aguarde alguns segundos antes de verificar novamente (ajuste conforme necessÃ¡rio)
        time.sleep(20)

    except Exception as e:
        # Lida com exceÃ§Ãµes, se ocorrerem
     print(f"Erro: {str(e)}")
     print(f"Erro: {str(e)}")
